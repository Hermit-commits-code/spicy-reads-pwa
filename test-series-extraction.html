<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Series Extraction</title>
  </head>
  <body>
    <h1>Test Series Extraction</h1>

    <h2>Amazon-style Series</h2>
    <div>
      <h1 id="productTitle">Harry Potter and the Philosopher's Stone</h1>
      <div class="author">
        <a class="a-link-normal" href="/author">J.K. Rowling</a>
      </div>
      <div id="series-title">
        <a href="/series">Harry Potter (Book 1)</a>
      </div>
      <img
        id="landingImage"
        src="https://via.placeholder.com/300x400"
        alt="Book cover"
      />
    </div>

    <h2>Goodreads-style Series</h2>
    <div>
      <h1 data-testid="bookTitle">The Fellowship of the Ring</h1>
      <span data-testid="name">J.R.R. Tolkien</span>
      <h3 data-testid="seriesName">
        <a href="/series">The Lord of the Rings #1</a>
      </h3>
      <img
        class="ResponsiveImage"
        src="https://via.placeholder.com/300x400"
        alt="Book cover"
      />
    </div>

    <script>
      // Test extraction
      console.log("Testing series extraction...");

      // Simulate Amazon extraction
      const amazonSeriesElement = document.querySelector("#series-title a");
      if (amazonSeriesElement) {
        const seriesText = amazonSeriesElement.textContent.trim();
        console.log("Amazon series text:", seriesText);

        const bookNumMatch = seriesText.match(/\b(?:Book|Vol|Volume)\s*(\d+)/i);
        const seriesMatch = seriesText.match(/^([^(]+?)(?:\s*\(|$)/);

        if (seriesMatch) {
          console.log("Amazon series name:", seriesMatch[1].trim());
        }
        if (bookNumMatch) {
          console.log("Amazon series number:", bookNumMatch[1]);
        }
      }

      // Simulate Goodreads extraction
      const goodreadsSeriesElement = document.querySelector(
        'h3[data-testid="seriesName"] a'
      );
      if (goodreadsSeriesElement) {
        const seriesText = goodreadsSeriesElement.textContent.trim();
        console.log("Goodreads series text:", seriesText);

        const seriesMatch = seriesText.match(/^([^#]+?)(?:\s*#(\d+)|$)/);
        if (seriesMatch) {
          console.log("Goodreads series name:", seriesMatch[1].trim());
          if (seriesMatch[2]) {
            console.log("Goodreads series number:", seriesMatch[2]);
          }
        }
      }
    </script>
  </body>
</html>
