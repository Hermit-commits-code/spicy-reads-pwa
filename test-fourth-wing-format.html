<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Fourth Wing (Standard Edition) (The Empyrean, 1) Hardcover ‚Äì May 2, 2023
    </title>
  </head>
  <body>
    <h1>Test Fourth Wing Series Format</h1>

    <h2>Real Amazon Format (like Fourth Wing)</h2>
    <div>
      <h1 id="productTitle">
        Fourth Wing (Standard Edition) (The Empyrean, 1)
      </h1>
      <div class="author">
        <a class="a-link-normal" href="/author">Rebecca Yarros</a>
      </div>
      <img
        id="landingImage"
        src="https://via.placeholder.com/300x400"
        alt="Book cover"
      />
    </div>

    <h2>Test Results:</h2>
    <div id="results"></div>

    <script>
      console.log(
        "Testing improved series extraction for Fourth Wing format..."
      );

      const resultsDiv = document.getElementById("results");

      function testSeriesExtraction(text, source) {
        console.log(`\n=== Testing ${source}: "${text}" ===`);

        let seriesName = "";
        let seriesNumber = "";

        // Look for patterns like "Fourth Wing (The Empyrean, 1)"
        const titleMatch = text.match(/\(([^)]+),\s*(\d+)\)/);
        if (titleMatch) {
          seriesName = titleMatch[1].trim();
          seriesNumber = titleMatch[2];
          console.log("‚úÖ Found series:", seriesName, "Number:", seriesNumber);

          resultsDiv.innerHTML += `<p><strong>${source}:</strong><br>
                    Series: <em>${seriesName}</em><br>
                    Number: <em>${seriesNumber}</em></p>`;

          return { seriesName, seriesNumber };
        }

        console.log("‚ùå No series info found");
        resultsDiv.innerHTML += `<p><strong>${source}:</strong> No series found</p>`;
        return { seriesName: "", seriesNumber: "" };
      }

      // Test the real Fourth Wing format
      const title = document.querySelector("#productTitle").textContent.trim();
      const pageTitle = document.title;

      testSeriesExtraction(pageTitle, "Page Title");
      testSeriesExtraction(title, "Product Title");

      console.log(
        "\nüéØ This should detect 'The Empyrean' as series name and '1' as number!"
      );
    </script>
  </body>
</html>
